<div class="post-wrapper">
  <img class="post__profile-img" src="{{post()!.author.avatarUrl | imgUrl}}" alt="">
  <div class="post-wrapper__main">
    <div class="post__top">

      <div class="post__top-text">
        <div class="post__top-about">
          <span class="post__top-author">{{ post()!.author.firstName }} {{ post()!.author.lastName }}</span>
          <span class="post__top-time">

            {{ post()!.createdAt | timeAgo }}
          </span>
        </div>
        <span class="post__title-main-text medium-text">
          {{ post()!.content }}
        </span>
      </div>


      @if (isMyPageInp) {
        <div

          popupDirective
          (appClickOutside)="isPopupVisible.set(false)"
        >
          <div class="popup-wrapper post"
               [style.display]="isPopupVisible()? 'flex' : 'none'"
          >
            <button class="popup-btn">

              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M15.6287 5.12132L4.31497 16.435M15.6287 5.12132L19.1642 8.65685M15.6287 5.12132L17.0429 3.70711C17.4334 3.31658 18.0666 3.31658 18.4571 3.70711L20.5784 5.82843C20.969 6.21895 20.969 6.85212 20.5784 7.24264L19.1642 8.65685M7.85051 19.9706L4.31497 16.435M7.85051 19.9706L19.1642 8.65685M7.85051 19.9706L3.25431 21.0312L4.31497 16.435"
                  stroke="currentColor"/>
              </svg>
              Изменить
            </button>
            <button class="popup-btn red-hover" (click)="onDeletePost(post()!.id)">
              <svg width="16" height="16" viewBox="0 0 10 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M7.34375 0.65625H9.65625V2H0.34375V0.65625H2.65625L3.34375 0H6.65625L7.34375 0.65625ZM2.34375 4V10.6562H7.65625V4H2.34375ZM1 10.6562V2.65625H9V10.6562C9 11.0104 8.86458 11.3229 8.59375 11.5938C8.32292 11.8646 8.01042 12 7.65625 12H2.34375C1.98958 12 1.67708 11.8646 1.40625 11.5938C1.13542 11.3229 1 11.0104 1 10.6562Z"
                  fill="currentColor"/>
              </svg>

              Удалить
            </button>
          </div>


          <button class="btn-black btn"
                  (click)="isPopupVisible.set(true)"
          >

            <svg width="12" height="4" viewBox="0 0 12 4" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M5.0625 1.0625C5.33333 0.791667 5.64583 0.65625 6 0.65625C6.35417 0.65625 6.66667 0.791667 6.9375 1.0625C7.20833 1.33333 7.34375 1.64583 7.34375 2C7.34375 2.35417 7.20833 2.66667 6.9375 2.9375C6.66667 3.20833 6.35417 3.34375 6 3.34375C5.64583 3.34375 5.33333 3.20833 5.0625 2.9375C4.79167 2.66667 4.65625 2.35417 4.65625 2C4.65625 1.64583 4.79167 1.33333 5.0625 1.0625ZM9.0625 1.0625C9.33333 0.791667 9.64583 0.65625 10 0.65625C10.3542 0.65625 10.6667 0.791667 10.9375 1.0625C11.2083 1.33333 11.3438 1.64583 11.3438 2C11.3438 2.35417 11.2083 2.66667 10.9375 2.9375C10.6667 3.20833 10.3542 3.34375 10 3.34375C9.64583 3.34375 9.33333 3.20833 9.0625 2.9375C8.79167 2.66667 8.65625 2.35417 8.65625 2C8.65625 1.64583 8.79167 1.33333 9.0625 1.0625ZM1.0625 1.0625C1.33333 0.791667 1.64583 0.65625 2 0.65625C2.35417 0.65625 2.66667 0.791667 2.9375 1.0625C3.20833 1.33333 3.34375 1.64583 3.34375 2C3.34375 2.35417 3.20833 2.66667 2.9375 2.9375C2.66667 3.20833 2.35417 3.34375 2 3.34375C1.64583 3.34375 1.33333 3.20833 1.0625 2.9375C0.791667 2.66667 0.65625 2.35417 0.65625 2C0.65625 1.64583 0.791667 1.33333 1.0625 1.0625Z"
                fill="currentColor"/>
            </svg>
          </button>
        </div>

      }
    </div>


    <div class="post__stats">
      <button
        class="post__stats-btn"
        [class.active]="isOpenedComments()"
        (click)="isOpenedComments.set(!isOpenedComments())"
      >
        <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11.8438 8C11.8438 8.1875 11.7708 8.34375 11.625 8.46875C11.5 8.59375 11.3438 8.65625 11.1562 8.65625H4.5L1.84375 11.3438V2C1.84375 1.8125 1.90625 1.65625 2.03125 1.53125C2.15625 1.40625 2.3125 1.34375 2.5 1.34375H11.1562C11.3438 1.34375 11.5 1.40625 11.625 1.53125C11.7708 1.65625 11.8438 1.8125 11.8438 2V8ZM14.5 4C14.6875 4 14.8438 4.0625 14.9688 4.1875C15.0938 4.3125 15.1562 4.46875 15.1562 4.65625V14.6562L12.5 12H5.15625C4.96875 12 4.8125 11.9375 4.6875 11.8125C4.5625 11.6875 4.5 11.5312 4.5 11.3438V10H13.1562V4H14.5Z"
            fill="currentColor"/>
        </svg>
        <span class="post__stats-stat">{{ comments().length }}</span>
      </button>

      <button class="post__stats-btn">
        <svg width="15" height="13" viewBox="0 0 15 13" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M7.5625 10.375C8.5625 9.47917 9.30208 8.80208 9.78125 8.34375C10.2604 7.88542 10.7812 7.34375 11.3438 6.71875C11.9062 6.09375 12.2917 5.54167 12.5 5.0625C12.7292 4.58333 12.8438 4.11458 12.8438 3.65625C12.8438 2.98958 12.6146 2.4375 12.1562 2C11.7188 1.5625 11.1667 1.34375 10.5 1.34375C9.97917 1.34375 9.48958 1.48958 9.03125 1.78125C8.59375 2.07292 8.29167 2.44792 8.125 2.90625H6.875C6.70833 2.44792 6.39583 2.07292 5.9375 1.78125C5.5 1.48958 5.02083 1.34375 4.5 1.34375C3.83333 1.34375 3.27083 1.5625 2.8125 2C2.375 2.4375 2.15625 2.98958 2.15625 3.65625C2.15625 4.11458 2.26042 4.58333 2.46875 5.0625C2.69792 5.54167 3.09375 6.09375 3.65625 6.71875C4.21875 7.34375 4.73958 7.88542 5.21875 8.34375C5.69792 8.80208 6.4375 9.47917 7.4375 10.375L7.5 10.4375L7.5625 10.375ZM10.5 0C11.5417 0 12.4062 0.354167 13.0938 1.0625C13.8021 1.77083 14.1562 2.63542 14.1562 3.65625C14.1562 4.26042 14.0417 4.85417 13.8125 5.4375C13.5833 6 13.1562 6.63542 12.5312 7.34375C11.9271 8.05208 11.375 8.64583 10.875 9.125C10.375 9.60417 9.57292 10.3438 8.46875 11.3438L7.5 12.2188L6.53125 11.375C5.09375 10.0833 4.05208 9.11458 3.40625 8.46875C2.78125 7.82292 2.19792 7.0625 1.65625 6.1875C1.11458 5.3125 0.84375 4.46875 0.84375 3.65625C0.84375 2.63542 1.1875 1.77083 1.875 1.0625C2.58333 0.354167 3.45833 0 4.5 0C5.70833 0 6.70833 0.46875 7.5 1.40625C8.29167 0.46875 9.29167 0 10.5 0Z"
            fill="currentColor"/>
        </svg>
        <span class="post__stats-stat">{{ post()!.likes }}</span>
      </button>
    </div>

    <div
      class="post__comm"
      [style.display]="isOpenedComments() ? 'grid' : 'none' "
    >

      <div class="post__comm-wrapper">
        @for (comment of comments(); track comment.id) {
          <app-comment
            [comment]="comment"
          />
        }

      </div>
    </div>

    <app-message-input
      (created)="onCreatedComment($event)"
      [postId]="post()!.id"
      [isCommentInput]="true"
      [style.display]="isOpenedComments() ? 'grid' : 'none' "
    />
  </div>
</div>
