<div class="wrapper-main">
  <img class="small-logo" src="/assets/svg/logo-big.svg" alt="" />

  <div class="pages">
    <a class="page" [routerLink]="['/profile/me']" routerLinkActive="page__active">
      <div class="page__logo">
        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M5.65625 11.3438H2.34375V6H0.34375L7 0L13.6562 6H11.6562V11.3438H8.34375V7.34375H5.65625V11.3438Z"
            fill="currentColor"
          />
        </svg>
      </div>
      <div class="page__label">Моя страница</div>
    </a>

    <a class="page" [routerLink]="['/chats']" routerLinkActive="page__active">
      <div class="page__logo">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11 4.34375V3H3V4.34375H11ZM8.34375 8.34375V7H3V8.34375H8.34375ZM3 5V6.34375H11V5H3ZM12.3438 0.34375C12.6979 0.34375 13 0.479167 13.25 0.75C13.5208 1 13.6562 1.30208 13.6562 1.65625V9.65625C13.6562 10.0104 13.5208 10.3229 13.25 10.5938C13 10.8646 12.6979 11 12.3438 11H3L0.34375 13.6562V1.65625C0.34375 1.30208 0.46875 1 0.71875 0.75C0.989583 0.479167 1.30208 0.34375 1.65625 0.34375H12.3438Z"
            fill="currentColor"
          />
        </svg>
      </div>
      <div class="page__label">Чаты</div>
      @if (unreadMessages() > 0) {
        <div class="count-chats">{{ unreadMessages() }}</div>
      }
    </a>

    <a class="page" [routerLink]="['/search']" routerLinkActive="page__active">
      <div class="page__logo">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M2.21875 6.46875C2.80208 7.05208 3.51042 7.34375 4.34375 7.34375C5.17708 7.34375 5.88542 7.05208 6.46875 6.46875C7.05208 5.88542 7.34375 5.17708 7.34375 4.34375C7.34375 3.51042 7.05208 2.80208 6.46875 2.21875C5.88542 1.63542 5.17708 1.34375 4.34375 1.34375C3.51042 1.34375 2.80208 1.63542 2.21875 2.21875C1.63542 2.80208 1.34375 3.51042 1.34375 4.34375C1.34375 5.17708 1.63542 5.88542 2.21875 6.46875ZM8.34375 7.34375L11.6562 10.6562L10.6562 11.6562L7.34375 8.34375V7.8125L7.15625 7.625C6.36458 8.3125 5.42708 8.65625 4.34375 8.65625C3.13542 8.65625 2.10417 8.23958 1.25 7.40625C0.416667 6.57292 0 5.55208 0 4.34375C0 3.13542 0.416667 2.11458 1.25 1.28125C2.10417 0.427083 3.13542 0 4.34375 0C5.55208 0 6.57292 0.427083 7.40625 1.28125C8.23958 2.11458 8.65625 3.13542 8.65625 4.34375C8.65625 4.78125 8.55208 5.28125 8.34375 5.84375C8.13542 6.38542 7.89583 6.82292 7.625 7.15625L7.8125 7.34375H8.34375Z"
            fill="currentColor"
          />
        </svg>
      </div>
      <div class="page__label">Поиск</div>
    </a>

    <a class="page" [routerLink]="['/experiment']" routerLinkActive="page__active">
      <div class="page__logo">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 10">
          <path
            fill="currentColor"
            d="M12 7v-2l-1.2-0.4c-0.1-0.3-0.2-0.7-0.4-1l0.6-1.2-1.5-1.3-1.1 0.5c-0.3-0.2-0.6-0.3-1-0.4l-0.4-1.2h-2l-0.4 1.2c-0.3 0.1-0.7 0.2-1 0.4l-1.1-0.5-1.4 1.4 0.6 1.2c-0.2 0.3-0.3 0.6-0.4 1l-1.3 0.3v2l1.2 0.4c0.1 0.3 0.2 0.7 0.4 1l-0.5 1.1 1.4 1.4 1.2-0.6c0.3 0.2 0.6 0.3 1 0.4l0.3 1.3h2l0.4-1.2c0.3-0.1 0.7-0.2 1-0.4l1.2 0.6 1.4-1.4-0.6-1.2c0.2-0.3 0.3-0.6 0.4-1l1.2-0.4zM3 6c0-1.7 1.3-3 3-3s3 1.3 3 3c0 1.7-1.3 3-3 3s-3-1.3-3-3z"
          ></path>
          <path
            fill="currentColor"
            d="M16 3v-1h-0.6c0-0.2-0.1-0.4-0.2-0.5l0.4-0.4-0.7-0.7-0.4 0.4c-0.2-0.1-0.3-0.2-0.5-0.2v-0.6h-1v0.6c-0.2 0-0.4 0.1-0.5 0.2l-0.4-0.4-0.7 0.7 0.4 0.4c-0.1 0.2-0.2 0.3-0.2 0.5h-0.6v1h0.6c0 0.2 0.1 0.4 0.2 0.5l-0.4 0.4 0.7 0.7 0.4-0.4c0.2 0.1 0.3 0.2 0.5 0.2v0.6h1v-0.6c0.2 0 0.4-0.1 0.5-0.2l0.4 0.4 0.7-0.7-0.4-0.4c0.1-0.2 0.2-0.3 0.2-0.5h0.6zM13.5 3.5c-0.6 0-1-0.4-1-1s0.4-1 1-1 1 0.4 1 1c0 0.6-0.4 1-1 1z"
          ></path>
        </svg>
      </div>
      <div class="page__label">Эксперименты</div>
    </a>
  </div>

  <div class="subscribers">
    <!--    <div class="subscribers__title">Подписчики</div>-->
    <div class="subscribers__title">Подписки</div>

    <div class="subscribers-profiles__profile">
      @for (profile of subscriptions$ | async; track profile.id) {
        <app-subscriber-card [profile]="profile" />
      }
    </div>

    <!--    <div-->
    <!--      [routerLink]="['/subscribers']"-->
    <!--      class="subscribers__title-->
    <!--      subscribers__title__purple"-->
    <!--    >-->
    <!--      <span>Все подписчики</span>-->
    <!--      <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">-->
    <!--        <path d="M0.222657 8.44531L3.66797 5L0.222656 1.55469L1.27734 0.5L5.77734 5L1.27734 9.5L0.222657 8.44531Z"-->
    <!--              fill="currentColor"/>-->
    <!--      </svg>-->
    <!--    </div>-->

    <div class="subscribers__title subscribers__title__purple">
      <span>Все подписки</span>
      <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M0.222657 8.44531L3.66797 5L0.222656 1.55469L1.27734 0.5L5.77734 5L1.27734 9.5L0.222657 8.44531Z"
          fill="currentColor"
        />
      </svg>
    </div>
  </div>
</div>

<div popupDirective (appClickOutside)="isOpenedPopupBtn.set(false)">
  <div class="popup-wrapper sidebar" [style.display]="isOpenedPopupBtn() ? 'flex' : 'none'">
    <button class="popup-btn" [routerLink]="['/settings']" (click)="isOpenedPopupBtn.set(false)">
      <div class="page__logo">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M5.34342 8.65625C5.80175 9.11458 6.35384 9.34375 6.99967 9.34375C7.6455 9.34375 8.19759 9.11458 8.65592 8.65625C9.11425 8.19792 9.34342 7.64583 9.34342 7C9.34342 6.35417 9.11425 5.80208 8.65592 5.34375C8.19759 4.88542 7.6455 4.65625 6.99967 4.65625C6.35384 4.65625 5.80175 4.88542 5.34342 5.34375C4.88509 5.80208 4.65592 6.35417 4.65592 7C4.65592 7.64583 4.88509 8.19792 5.34342 8.65625ZM11.9685 7.65625L13.3747 8.75C13.5205 8.85417 13.5414 9 13.4372 9.1875L12.0935 11.5C12.0101 11.6458 11.8747 11.6875 11.6872 11.625L10.0309 10.9688C9.59342 11.2812 9.21842 11.5 8.90592 11.625L8.65592 13.375C8.61425 13.5625 8.51009 13.6562 8.34342 13.6562H5.65592C5.48925 13.6562 5.38509 13.5625 5.34342 13.375L5.09342 11.625C4.69759 11.4583 4.32259 11.2396 3.96842 10.9688L2.31217 11.625C2.12467 11.6875 1.98925 11.6458 1.90592 11.5L0.562175 9.1875C0.458008 9 0.478842 8.85417 0.624675 8.75L2.03092 7.65625C2.01009 7.51042 1.99967 7.29167 1.99967 7C1.99967 6.70833 2.01009 6.48958 2.03092 6.34375L0.624675 5.25C0.478842 5.14583 0.458008 5 0.562175 4.8125L1.90592 2.5C1.98925 2.35417 2.12467 2.3125 2.31217 2.375L3.96842 3.03125C4.40592 2.71875 4.78092 2.5 5.09342 2.375L5.34342 0.625C5.38509 0.4375 5.48925 0.34375 5.65592 0.34375H8.34342C8.51009 0.34375 8.61425 0.4375 8.65592 0.625L8.90592 2.375C9.30175 2.54167 9.67675 2.76042 10.0309 3.03125L11.6872 2.375C11.8747 2.3125 12.0101 2.35417 12.0935 2.5L13.4372 4.8125C13.5414 5 13.5205 5.14583 13.3747 5.25L11.9685 6.34375C11.9893 6.48958 11.9997 6.70833 11.9997 7C11.9997 7.29167 11.9893 7.51042 11.9685 7.65625Z"
            fill="currentColor"
          />
        </svg>
      </div>
      <div class="page__label">Настройки</div>
    </button>

    <button class="popup-btn" (click)="onLogout(); isOpenedPopupBtn.set(false)">
      <div class="page__logo">
        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M1.65625 1.34375V10.6562H7V12H1.65625C1.30208 12 0.989583 11.8646 0.71875 11.5938C0.46875 11.3229 0.34375 11.0104 0.34375 10.6562V1.34375C0.34375 0.989583 0.46875 0.677083 0.71875 0.40625C0.989583 0.135417 1.30208 0 1.65625 0H7V1.34375H1.65625ZM10.3438 2.65625L13.6562 6L10.3438 9.34375L9.40625 8.375L11.125 6.65625H4.34375V5.34375H11.125L9.40625 3.59375L10.3438 2.65625Z"
            fill="currentColor"
          />
        </svg>
      </div>

      <div class="page__label">Выйти</div>
    </button>
  </div>

  <button class="user-sec" routerLinkActive="page__active" (click)="isOpenedPopupBtn.set(!isOpenedPopupBtn())">
    @if (me(); as me) {
      <img class="profile__img" [src]="me.avatarUrl | imgUrl" />

      <span class="profile__name">{{ me.username }}</span>
    }
    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M5.34342 8.65625C5.80175 9.11458 6.35384 9.34375 6.99967 9.34375C7.6455 9.34375 8.19759 9.11458 8.65592 8.65625C9.11425 8.19792 9.34342 7.64583 9.34342 7C9.34342 6.35417 9.11425 5.80208 8.65592 5.34375C8.19759 4.88542 7.6455 4.65625 6.99967 4.65625C6.35384 4.65625 5.80175 4.88542 5.34342 5.34375C4.88509 5.80208 4.65592 6.35417 4.65592 7C4.65592 7.64583 4.88509 8.19792 5.34342 8.65625ZM11.9685 7.65625L13.3747 8.75C13.5205 8.85417 13.5414 9 13.4372 9.1875L12.0935 11.5C12.0101 11.6458 11.8747 11.6875 11.6872 11.625L10.0309 10.9688C9.59342 11.2812 9.21842 11.5 8.90592 11.625L8.65592 13.375C8.61425 13.5625 8.51009 13.6562 8.34342 13.6562H5.65592C5.48925 13.6562 5.38509 13.5625 5.34342 13.375L5.09342 11.625C4.69759 11.4583 4.32259 11.2396 3.96842 10.9688L2.31217 11.625C2.12467 11.6875 1.98925 11.6458 1.90592 11.5L0.562175 9.1875C0.458008 9 0.478842 8.85417 0.624675 8.75L2.03092 7.65625C2.01009 7.51042 1.99967 7.29167 1.99967 7C1.99967 6.70833 2.01009 6.48958 2.03092 6.34375L0.624675 5.25C0.478842 5.14583 0.458008 5 0.562175 4.8125L1.90592 2.5C1.98925 2.35417 2.12467 2.3125 2.31217 2.375L3.96842 3.03125C4.40592 2.71875 4.78092 2.5 5.09342 2.375L5.34342 0.625C5.38509 0.4375 5.48925 0.34375 5.65592 0.34375H8.34342C8.51009 0.34375 8.61425 0.4375 8.65592 0.625L8.90592 2.375C9.30175 2.54167 9.67675 2.76042 10.0309 3.03125L11.6872 2.375C11.8747 2.3125 12.0101 2.35417 12.0935 2.5L13.4372 4.8125C13.5414 5 13.5205 5.14583 13.3747 5.25L11.9685 6.34375C11.9893 6.48958 11.9997 6.70833 11.9997 7C11.9997 7.29167 11.9893 7.51042 11.9685 7.65625Z"
        fill="currentColor"
      />
    </svg>
  </button>
</div>
